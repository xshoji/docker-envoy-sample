@startuml
title envoy

'==============================
' Setting
'==============================
left to right direction
skinparam handwritten true


actor Mac as Mac

package SidecarUnit as SidecarUnitFront {
  node envoy-front <<container>> as EnvoyFront {
    component "listener-config" as ListenerConfigFront
    note top of ListenerConfigFront 
      Downstreamに対する設定
    end note
    
    component "cluster-config" as ClusterConfigFront
    note bottom of ClusterConfigFront 
      Upstreamに対する設定
    end note    
  }
  node front <<container>> as Front
}

package SidecarUnit as SidecarUnitApp {
  node envoy-app <<container>> as EnvoyApp {
    component "listener-config" as ListenerConfigApp
    component "cluster-config" as ClusterConfigApp
  }
  node app <<container>> as App
}

Mac --> ListenerConfigFront : <<Downstream>>
ListenerConfigFront -> ClusterConfigFront

ClusterConfigFront --> Front : <<Upstream>>
ListenerConfigFront <-- Front : <<Downstream>>

ClusterConfigFront -> ListenerConfigApp : envoy-frontからみると<b><<Upstream>></b>\nenvoy-appからみると<b><<Downstream>></b>

ListenerConfigApp -> ClusterConfigApp
ClusterConfigApp --> App : <<Upstream>>


'------------
' layout


@enduml
